# Curtin CMPE6012 Final Project

### Most readme contents are generated by Codex

## Overview
This repository contains the source for a DeepStream-based animal detection and tracking pipeline that was for the Curtin University CMPE6012 AI/ML course final project. The first application (`ds_track_cam.py`) captures frames from a CSI camera, performs YOLO inference through `nvinfer`, and drives both GPIO-connected indicator lights. The second application second script (`ds_track_cam_with_web.py`) adds a web server to show some status.

## Repository layout
| File | Description |
| --- | --- |
| `ds_track_cam.py` | DeepStream pipeline with GPIO integration, pause/resume support. |
| `ds_track_cam_with_web.py` | Variant that adds HTML overlay output suitable for dashboards. |
| `pgie_config_yolo.txt` | NVDS primary generic infer engine (`pgie`) configuration referenced by the scripts. |
| `metrics.html` | Standalone HTML used to render collected throughput/accuracy metrics.

## Requirements
- Jetson platform with JetPack 5.1.3 (DeepStream 6.3).
- Python 3.8+ with the DeepStream Python bindings available on the device.
- a YOLO model engine converted by [DeepStream-Yolo](https://github.com/marcoslucianops/DeepStream-Yolo)


## Quick start
1. Copy the repository to your Jetson device and ensure the YOLO engine file referenced inside `pgie_config_yolo.txt` exists.
2. Run the minimal tracker:
   ```bash
   python3 ds_track_cam.py --pgie pgie_config_yolo.txt --tracker tracker_nvdcf_config.yml
   ```
   Replace the tracker path with your preferred NvDCF or IOU config. The script defaults to a CSI camera at 640×480@30 and outputs a muxed 640×640 stream.
#### You have to connect a monitor or a monitor simulator if you use VNC when running the program. Otherwise you will encounter an EGL problem which will cause you a headache.

## GPIO mapping
- Pin 29 – Cow indicator LED
- Pin 31 – Sheep indicator LED
- Pin 33 – Dog indicator LED
- Pin 32 – Enable switch (toggles `nvinfer` interval to pause/resume inference to demostrate power saving)
### The hardware I use is an STM32 board + VL53L1X ToF Sensor. You can use Arduino to simulate that.

## Known issues
1. The program cannot shut down properly. Due to GStreamer still running, it will get stuck. You have to kill the program manually before restarting the program (send SIGTERM or SIGKILL); otherwise, you will upset the nvargus-daemon, then you will need a full system reboot.
2. Racing conditions and output instabilisation still exist.
